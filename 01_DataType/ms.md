# 데이터 타입

## 데이터 타입의 구분

- 데이터 타입
  - 기본형 데이터
    - ex) Number, String, Boolean, null, undefined, Symbol
  - 참조형 데이터
    - ex) Object(Array, Function, Date, RegExp, Map, WeakMap, Set, WeakSet)

## 자바스크립트에서 데이터를 처리하는 과정

- 모든 데이터는 메모리 주솟값을 통해 서로를 구분하고 연결할 수 있음.
- 변수는 변할 수 있는 데이터, 식별자는 변수명을 뜻함.

### 어떤 기준으로 기본형과 참조형을 구분하는가?

데이터 타입은 **_불변성_**을 기준으로 데이터 타입이 구분됩니다.

- 기본형 데이터는 값이 담긴 주소값을 데이터 값으로 저장
- 참조형 데이터는 객체의 변수 영역을 가리키는 주소값을 데이터 값으로 저장

기본형 데이터는 데이터를 변경하고 싶으면 데이터 영역에 새로 변경할 데이터를 만들어 변경해야 함.(***불변성***) 하지만 참조형 데이터는 변경 시 새로운 객체가 만들어지는 것이 아니라 기존의 객체 내부 값만 바뀌면 됨.(***가변성***)

#### 배경 지식 - 변수 선언과 데이터 할당
```js
var a; // 변수 a 선언
a = 'abc' // 변수 a에 데이터 할당

var a = 'abc' // 변수 선언과 할당을 한 문장으로 표현

// 선언과 할당을 따로 하든, 한 문장으로 하든 자바스크립트 엔진은 같은 동작을 수행함.
```

<table>
  <tr>
    <td rowspan="2">변수 영역</td>
    <td>주소</td>
    <td>...</td>
    <td>1002</td>
    <td>1003</td>
    <td>1004</td>
    <td>...</td>
  </tr>
  <tr>
    <td >변수 영역</td>
    <td ></td>
    <td ></td>
    <td >이름:  a </br> 값: @5004</td>
    <td ></td>
    <td ></td>
  </tr>
  <tr>
    <td rowspan="2">데이터 영역</td>
      <td>주소</td>
         <td>...</td>
    <td>5002</td>
    <td>5003</td>
    <td>5004</td>
    <td>...</td>
  </tr>
    <tr>
    <td >변수 영역</td>
     <td ></td>
    <td ></td>
    <td ></td>
    <td >'abc'</td>
    <td ></td>
  </tr>
</table>

- 변수 영억에서 빈 공간(@1003)을 확보하고 그 공간의 이름을 설정하는 선언과정을 수행한다.(확보된 공간 식별자 a로 지정)
- 데이터 영역에서 빈 공간(@5004)에 문자열 'abc'를 지정하고 변수 영역에서 a 식별자를 검색한다.
- 앞서 저장한 문자열의 주소(@5004)를 @1003공간에 대입한다.

##### 왜 변수 영역과 데이터 영역을 나누어 관리할까?
- 데이터 변환을 자유롭게 하기 위함.
- 메모리를 더욱 효율적으로 관리하기 위함.


### 기본형과 참조형의 차이 - 변수 복사

#### 기본형

```js
var a = 10; // 1️⃣
var b = a;  // 2️⃣
b = 15; //  3️⃣
```

- :one: a의 선언과 할당을 마침
- :two: b를 선언하고, 식별자 a를 검색해 그 값을 b의 값으로 할당함.
- :three: 데이터 영역에 15가 없기 때문에 새로운 공간에 저장하고, 변수 영역에서 식별자 b인 주소를 찾고 새로운 공간에 저장한 값으로 값을 바꿈.

#### 참조형

```js
var obj1 = {c:10, d:'ddd'};  // 1️⃣
var obj2 = obj1; // 2️⃣
obj2.c = 20 //  3️⃣

// 객체 자체를 변경했을 경우
obj2 = {c:20, d:'ddd'} //4️⃣
```

- :one: obj1의 선언과 할당을 마침
  - 객체는 객체의 변수 영역이 따로 존재함.
  - 객체의 변수 영역의 주소값을 할당시킴
- :two: obj2를 선언하고, 식별자 obj1를 검색해 그 값을 obj2의 값으로 할당함.
- :three: obj2의 값은 객체 변수 영역의 주소값이고, 객체 변수 영역의 프로퍼티가 바뀐 것이지 객체 변수 영역의 주소값이 바뀐 것이 아님.

- :four: 객체 자체를 변경 했을때, obj2에 새로운 객체를 할당함으로 값을 직접 변경함. 데이터 영역의 새로운 공간에 새 객체가 저장되고 그 주소를 변경 영역 obj2 위치에 저장되기 때문에 객체에 대한 변경임에도 값이 달라짐.

#### 결론

- 차이점
  - 변수 복사 이후 값을 변경 했을때 a와 b는 서로 다른 주소를 바라보지만, obj1과 obj2는 같은 객체를 바라보고 있다.

```
a !== b
obj1 === obj2
```

- 공통점
  - 변수를 복사하는 과정은 기본형 데이터와 참조형 데이터 모두 같은 주소를 바라봄.

## 불변 객체
-값으로 전달받은 객체에 변경을 가하더라도 원본 객체는 변하지 않아야 하는 경우에는 불변 객체로 만들어 사용한다.

### 1. 얕은 복사
- 바로 아래 단계의 값만 복사하는 방법
- 중첩 객체일 경우, 원본과 사본이 모두 동일한 참조형 데이터의 주소를 가지게 되므로 사본을 바꾸면 원본도 같이 바뀌는 문제점이 발생함.

### 2. 깊은 복사
- 내부의 모든 값을 다 찾아 전부 복사하는 방법
- 객체의 프로퍼티 중 그 값이 참조형 데이터일 경우 다시 그 내부의 프로퍼티를 복사하기 때문에 원본과 사본이 서로 다른 객체를 참조하게 되어 사본을 바꾸더라도 원본이 바뀌지 않음.
- JSON을 활용해 간단한 깊은 복사를 할 수 있음.
  - httpRequest로 받은 데이터를 저장한 객체를 복사할 때 유용
  - 메서드나 숨겨진 프로퍼티인 __proto__나 getter/setter 등과 같은 JSON으로 변경 불가능한 프로퍼티는 무시함.

## undefined와 null
- undefined
  - 값이 존재하지 않을때 자바스크립트 엔진이 자동으로 부여
    1. 값을 대입하지 않은 변수
    2. 객체 내부의 존재하지 않는 프로퍼티에 접근하려고 할 때
    3. return문이 없가나 호출되지 않는 함수의 실행 결과

  - 사용자 정의한 경우

- null
  - '비어있음'을 명시적으로 나타내고 싶을때
  - typeof null은 object라는 버그가 있음.
  