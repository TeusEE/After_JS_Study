# 콜백 함수

콜백 함수는 다른 코드의 인자로 넘겨주는 함수로 제어권과 관련이 있다

## 제어권
함수의 제어권: 호출 주체와 제어권이 사용자에게 있다
콜백 함수의 제어권: 호출 주체와 제어권이 콜백 함수를 실행한 함수에게 있다

### this
콜백 함수도 기본적으로는 this 가 전역 객체를 참조하지만
제어권을 넘겨받을 코드에서 콜백 함수에 this 가 될 대상을 별로도 지정한 경우
대상을 참조하게 된다   

콜백 함수에서 this 바인딩이 있으면 전역 객체가 아닌 콜백 함수를 호출한 함수가 바인딩 된다

### 콜백 함수는 함수다

콜백 함수에 메서드를 전달 하더라도
콜백 함수는 함수로서 동작한다

## 콜백 함수 내부 this 에 다른 값 바인딩
이전에는 this 를 변수에 담아 전달하고 클로저로 만드는 방식이 많이 쓰였다
es5 의 바인드 메서드를 사용하면 명시적으로 다른 값을 바인딩 할 수 있다


## 콜백 지옥과 비동기 제어
콜백 함수는 주로 이벤트 처리나 통신과 같은 비동기 작업을 수행하기 위해 사용되는데
이는 콜백 지옥을 만들기도 한다
실행 대기 및 보류 등과 관련된 코드는 비동기 코드다

익명 콜백 함수를 모두 기명 함수로 변환한다면
호이스팅이 일어나 콜백 지옥을 겪지 않는 코드를 작성할 수는 있다
es6 에는 Promise, Generator 등이 도입되었고
es2017 에는 async/await 가 등장했다

Promise 는 resolve 와 reject 함수를 호출할 수 있는데
성공 시 resolve 
실패 시 reject

resolve 에 대한 return 은 `promise().then(res => res)`
reject 에 대한 return 은 `promise().catch(e => e)`

promise 는 mirco task queue 를 타기 떄문에
가장 높은 우선순위를 가지기도 한다

async/await 은 프로미스를 더 간결하게 사용할 수 있는 콜백 패턴이다
최근 가장 자주 사용되는 문법이 아닐까 싶다

await 뒤의 내용이 resolve 되면 다음 단계를 진행한다
.then() 과 비슷하게 동작한다
